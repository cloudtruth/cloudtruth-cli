mutation DeleteParameterMutation($parameterId: ID!) {
  deleteParameter(input: { id: $parameterId }) {
    clientMutationId
    deletedParameterId

    errors {
      path
      message
    }
  }
}

query ExportParametersQuery($organizationId: ID, $environmentName: String, $projectName: String, $format: ExportParametersFormatEnum!, $options: ExportParametersOptions!) {
  viewer {
    organization(id: $organizationId) {
      project(name: $projectName) {
        exportParameters(format: $format, options: $options, environmentName: $environmentName) {
          evaluated
        }
      }
    }
  }
}

query GetParameterByNameQuery($organizationId: ID, $envName: String, $projectName: String, $keyName: String!) {
  viewer {
    organization(id: $organizationId) {
      project(name: $projectName) {
        parameter(keyName: $keyName) {
          id
          environmentValue(environmentName: $envName) {
            parameterValue
            jmesPath
            integrationFile {
              fqn
            }
          }
          keyName
          isSecret
          description
          hasDynamicValue
        }
      }
    }
  }
}


query ParametersQuery($organizationId: ID, $environmentId: ID, $projectName: String) {
  viewer {
    id
    organization(id: $organizationId) {
      project(name: $projectName) {
        parameters(orderBy: { keyName: ASC }) {
          nodes {
            id
            keyName
            environmentValue(environmentId: $environmentId) {
              parameterValue
            }
          }
        }
      }
    }
  }
}

query ParametersDetailQuery($organizationId: ID, $environmentId: ID, $projectName: String) {
  viewer {
    id
    organization(id: $organizationId) {
      project(name: $projectName) {
        parameters(orderBy: { keyName: ASC }) {
          nodes {
            id
            isSecret
            keyName
            description
            environmentValue(environmentId: $environmentId) {
              parameterValue
              jmesPath
              integrationFile {
                name
                fqn
              }
              inheritedFrom {
                name
              }
              environment {
                name
              }
            }
            hasDynamicValue
          }
        }
      }
    }
  }
}

mutation UpsertParameterMutation($projectId: ID, $environmentName: String, $keyName: String!, $value: String, $secret: Boolean, $description: String, $fqn: String, $jmesPath: String) {
  upsertParameter(input: { keyName: $keyName, value: $value, environmentName: $environmentName, projectId: $projectId, isSecret: $secret , description: $description, jmesPath: $jmesPath, integrationFileFqn: $fqn}) {
    clientMutationId
    parameter {
      id
    }

    errors {
      path
      message
    }
  }
}
