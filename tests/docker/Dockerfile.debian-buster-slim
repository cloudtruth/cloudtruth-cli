FROM debian:buster-slim
ARG DOWNLOAD_AUTH_TOKEN=""
ARG DOWNLOAD_URL=""
ARG DOWNLOAD_VERSION=""
ENV CT_DOWNLOAD_URL=$DOWNLOAD_URL
ENV CT_DOWNLOAD_VERSION=$DOWNLOAD_VERSION
ENV CT_DOWNLOAD_AUTH_TOKEN=$DOWNLOAD_AUTH_TOKEN
COPY install.sh /tmp/ctinstall.sh
RUN chmod 755 /tmp/ctinstall.sh && /tmp/ctinstall.sh --url "${CT_DOWNLOAD_URL}" --version "${CT_DOWNLOAD_VERSION}" --auth-token "${CT_DOWNLOAD_AUTH_TOKEN}"
CMD cloudtruth --version